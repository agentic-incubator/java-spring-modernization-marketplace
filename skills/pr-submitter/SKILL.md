---
name: pr-submitter
description: Create pull requests for migrated repositories using GitHub CLI with standardized templates and migration summaries. Use after migration and validation are complete.
allowed-tools: Bash, Read, Glob, Grep
---

# PR Submitter Skill

Create standardized pull requests for Spring Boot migration changes using GitHub CLI.

## Prerequisites

- GitHub CLI (`gh`) must be installed and authenticated
- Repository must have changes committed to a feature branch
- Branch must be pushed to remote origin

## Create Pull Request

### Basic PR Creation

```bash
cd /path/to/repo

gh pr create \
  --title "chore: Migrate to Spring Boot 4.x" \
  --body "$(cat <<'EOF'
## Spring Boot 4.x Migration

This PR migrates the project to Spring Boot 4.x with all required dependency and code updates.

### Changes Applied

#### Build Configuration
- [ ] Updated Spring Boot parent to 4.0.0
- [ ] Updated Spring Cloud BOM to 2025.1.0
- [ ] Added Jackson BOM 3.0.2

#### Dependency Updates
- [ ] Migrated Jackson groupId: `com.fasterxml.jackson` → `tools.jackson`
- [ ] Updated Spring Security dependencies

#### Code Changes
- [ ] Updated Jackson imports (preserved `annotation.*`)
- [ ] Changed `JsonProcessingException` → `JacksonException`
- [ ] Converted `VaadinWebSecurity` → `VaadinSecurityConfigurer` (if applicable)
- [ ] Updated `AntPathRequestMatcher` → `PathPatternRequestMatcher` (if applicable)

### Validation Results

- Build: **PASSED**
- Tests: **PASSED**
- Deprecation warnings: See details below

### Testing Instructions

1. Check out this branch
2. Run `./mvnw clean verify` or `./gradlew clean build`
3. Verify application starts correctly
4. Run integration tests if available

### Generated By

Spring Modernization Marketplace v1.0
EOF
)"
```

### PR with Labels and Reviewers

```bash
gh pr create \
  --title "chore: Migrate to Spring Boot 4.x" \
  --body "$PR_BODY" \
  --label "dependencies,spring-boot-4" \
  --reviewer "@org/platform-team" \
  --assignee "@me"
```

### PR Against Specific Base Branch

```bash
gh pr create \
  --title "chore: Migrate to Spring Boot 4.x" \
  --body "$PR_BODY" \
  --base main \
  --head feature/spring-boot-4-migration
```

## PR Templates

### Standard Migration PR

```markdown
## Spring Boot 4.x Migration

This PR migrates the project to Spring Boot 4.x with all required dependency and code updates.

### Changes Applied

#### Build Configuration

- Updated Spring Boot parent to 4.0.0
- Updated Spring Cloud BOM to 2025.1.0
- Added Jackson BOM 3.0.2

#### Code Changes

- Updated Jackson imports (core/databind to tools.jackson)
- Preserved Jackson annotation imports (com.fasterxml.jackson.annotation)
- Updated exception handling (JacksonException)

### Validation

| Check             | Status                    |
| ----------------- | ------------------------- |
| Compilation       | :white_check_mark: Passed |
| Unit Tests        | :white_check_mark: Passed |
| Integration Tests | :white_check_mark: Passed |

### Generated By

Spring Modernization Marketplace v1.0
```

### Migration with Issues Found

```markdown
## Spring Boot 4.x Migration

### Changes Applied

[Standard changes list]

### Issues Requiring Attention

:warning: **Manual Review Needed:**

1. **Deprecation Warning** at `src/main/java/com/example/Service.java:45`
   - Using deprecated `WebSecurityConfigurerAdapter`
   - Recommendation: Migrate to component-based security config

2. **Test Failure** in `UserServiceTest.testAuthentication`
   - Cause: Security context changes in Spring Security 7
   - Action: Update test mocks

### Validation

| Check       | Status                    |
| ----------- | ------------------------- |
| Compilation | :white_check_mark: Passed |
| Unit Tests  | :warning: 2 failures      |

### Generated By

Spring Modernization Marketplace v1.0
```

## Dynamic PR Body Generation

Build PR body based on actual migration results:

```bash
# Collect migration stats
JACKSON_CHANGES=$(git diff --name-only | grep -c "\.java$" || echo "0")
BUILD_FILES=$(git diff --name-only | grep -E "(pom\.xml|build\.gradle)" | wc -l)

# Generate dynamic body
PR_BODY=$(cat <<EOF
## Spring Boot 4.x Migration

### Summary
- **Java files modified:** $JACKSON_CHANGES
- **Build files modified:** $BUILD_FILES
- **Branch:** $(git branch --show-current)
- **Commits:** $(git rev-list --count main..HEAD)

### Changes
$(git log main..HEAD --oneline | sed 's/^/- /')

### Generated By
Spring Modernization Marketplace v1.0
EOF
)

gh pr create --title "chore: Migrate to Spring Boot 4.x" --body "$PR_BODY"
```

## Batch PR Creation

Create PRs for multiple repositories:

```bash
WORKSPACE="/tmp/migration-workspace"
REPOS=("repo1" "repo2" "repo3")

for repo in "${REPOS[@]}"; do
  cd "$WORKSPACE/$repo"

  # Verify branch exists and has commits
  if git log main..HEAD --oneline | head -1 > /dev/null 2>&1; then
    echo "Creating PR for $repo..."
    gh pr create \
      --title "chore: Migrate $repo to Spring Boot 4.x" \
      --body "$PR_BODY" \
      --label "spring-boot-4-migration"

    echo "PR created for $repo"
  else
    echo "No changes in $repo, skipping PR"
  fi
done
```

## Output Format

Report PR creation status:

```json
{
  "repo": "owner/repo",
  "pr": {
    "number": 123,
    "url": "https://github.com/owner/repo/pull/123",
    "title": "chore: Migrate to Spring Boot 4.x",
    "status": "created",
    "branch": "feature/spring-boot-4-migration",
    "base": "main"
  }
}
```

## Error Handling

### PR Already Exists

```bash
# Check for existing PR
EXISTING=$(gh pr list --head feature/spring-boot-4-migration --json number --jq '.[0].number')

if [ -n "$EXISTING" ]; then
  echo "PR #$EXISTING already exists, updating..."
  gh pr edit $EXISTING --body "$PR_BODY"
else
  gh pr create --title "..." --body "$PR_BODY"
fi
```

### Authentication Issues

```bash
# Verify GitHub CLI auth
gh auth status

# Re-authenticate if needed
gh auth login --web
```

## Critical Rules

1. **Always verify branch is pushed** before creating PR
2. **Use descriptive titles** following conventional commits
3. **Include validation results** in PR body
4. **Add appropriate labels** for tracking
5. **Never create PRs with failing builds** unless explicitly noted
6. **Link related issues** when applicable
