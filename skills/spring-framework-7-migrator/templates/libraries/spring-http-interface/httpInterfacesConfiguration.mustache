{{>licenseInfo}}
package {{configPackage}};

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.reactive.function.client.WebClient;
import org.springframework.web.reactive.function.client.support.WebClientAdapter;
import org.springframework.web.service.invoker.HttpServiceProxyFactory;

@Configuration
public abstract class HttpInterfacesAbstractConfigurator {

    protected HttpInterfacesAbstractConfigurator(WebClient webClient) {
        this.webClient = webClient;
    }

    private final WebClient webClient;

    @Bean
    public HttpServiceProxyFactory httpServiceProxyFactory() {
        return HttpServiceProxyFactory
            .builderFor(WebClientAdapter.create(webClient))  // Framework 7 API
            .build();
    }

{{#apiInfo}}
{{#apis}}
    @Bean
    public {{classname}} {{#lambda.camelcase}}{{classname}}{{/lambda.camelcase}}(HttpServiceProxyFactory factory) {
        return factory.createClient({{classname}}.class);
    }

{{/apis}}
{{/apiInfo}}
}
